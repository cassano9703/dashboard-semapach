{
  "entities": {
    "DailyCollection": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "DailyCollection",
      "type": "object",
      "description": "Represents the daily collection data for the SEMAPACH dashboard.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the daily collection record."
        },
        "date": {
          "type": "string",
          "description": "The date of the collection.",
          "format": "date"
        },
        "dailyCollectionAmount": {
          "type": "number",
          "description": "The total collection amount for the day."
        },
        "accumulatedMonthlyTotal": {
          "type": "number",
          "description": "The total collection amount accumulated for the month up to this day."
        },
        "monthlyGoal": {
          "type": "number",
          "description": "The target collection amount for the entire month."
        },
        "updatedAt": {
          "type": "string",
          "description": "The timestamp when the record was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "date",
        "dailyCollectionAmount",
        "accumulatedMonthlyTotal",
        "monthlyGoal",
        "updatedAt"
      ]
    },
    "DistrictProgress": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "DistrictProgress",
      "type": "object",
      "description": "Represents the monthly progress of each district towards their collection goals.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the district progress record, in the format YYYY-MM-DistrictName."
        },
        "month": {
          "type": "string",
          "description": "The month of the progress record, in the format YYYY-MM."
        },
        "district": {
          "type": "string",
          "description": "The name of the district (e.g., Chincha Alta, Tambo de Mora)."
        },
        "monthlyGoal": {
          "type": "number",
          "description": "The monthly collection goal for the district."
        },
        "recovered": {
          "type": "number",
          "description": "The total amount recovered by the district for the entire month."
        }
      },
      "required": [
        "month",
        "district",
        "monthlyGoal",
        "recovered"
      ]
    },
    "RecoveredService": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "RecoveredService",
      "type": "object",
      "description": "Represents a daily record of recovered services for a specific district.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the recovered service record."
        },
        "date": {
          "type": "string",
          "description": "The date of the recovery, in YYYY-MM-DD format.",
          "format": "date"
        },
        "district": {
          "type": "string",
          "description": "The name of the district where the service was recovered."
        },
        "recoveredCount": {
          "type": "number",
          "description": "The number of services recovered on this day in this district."
        },
        "recoveredAmount": {
          "type": "number",
          "description": "The total monetary amount recovered from these services."
        },
        "updatedAt": {
          "type": "string",
          "description": "The timestamp when the record was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "date",
        "district",
        "recoveredCount",
        "recoveredAmount"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/daily_collections/{dailyCollectionId}",
        "definition": {
          "entityName": "DailyCollection",
          "schema": {
            "$ref": "#/backend/entities/DailyCollection"
          },
          "description": "Stores daily collection records. Includes `id` as the document ID.",
          "params": [
            {
              "name": "dailyCollectionId",
              "description": "The unique ID of the daily collection document."
            }
          ]
        }
      },
      {
        "path": "/district_progress/{districtProgressId}",
        "definition": {
          "entityName": "DistrictProgress",
          "schema": {
            "$ref": "#/backend/entities/DistrictProgress"
          },
          "description": "Stores a single monthly progress record for each district. The document ID is generated by Firestore.",
          "params": [
            {
              "name": "districtProgressId",
              "description": "The unique ID of the district progress document."
            }
          ]
        }
      },
      {
        "path": "/recovered_services/{recoveredServiceId}",
        "definition": {
          "entityName": "RecoveredService",
          "schema": {
            "$ref": "#/backend/entities/RecoveredService"
          },
          "description": "Stores daily records of recovered services. The document ID is generated by Firestore.",
          "params": [
            {
              "name": "recoveredServiceId",
              "description": "The unique ID of the recovered service document."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to store daily collection data, monthly district progress, and daily recovered services for the SEMAPACH dashboard. Authorization Independence is not a major concern as there is no user-specific data, and security will likely be role-based. The collections are segregated to avoid mixing different data types and to facilitate secure and efficient querying (QAPs). This segregation ensures that listing daily collections doesn't inadvertently expose district progress or recovered services data, and vice versa. The paths are straightforward to facilitate easy data access and manipulation, prioritizing clarity for front-end integration and reporting."
  }
}
